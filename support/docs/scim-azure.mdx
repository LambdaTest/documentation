---
title: "Azure AD Scim User Provisioning"
sidebarTitle: "Azure AD"
keywords: ["TestMu AI SCIM"]
---

import { BrandName } from "/snippets/BrandName.mdx";

## Prerequisites
Integrate SCIM With <BrandName />:

* You will need an Enterprise plan with <BrandName />.
* SSO must be already integrated. Please complete [<BrandName /> SSO & Azure AD Integration](/support/docs/sso-azure-integration/)

## Integrating SCIM with Azure AD
**Step 1:** Sign in to your <BrandName /> account. Don't have an account, [register for free](https://accounts.lambdatest.com/register).

![Image](/assets/images/lambdatest-mfa/dashboard.webp)

**Step 2:**  Head to **Settings** and select **Organization Settings** from the dropdown.

![Image](/assets/images/lambdatest-mfa/org-settings.webp)

**Step 3:**  Head to the **Authentication and SSO** tab and click and copy the **SCIM Base URL and Bearer Token** option.

![Image](/assets/images/lambdatest-scim/scim-base-url.png)

**Step 4:** Sign in to the [Azure portal](https://portal.azure.com). Select Enterprise Applications, then select All applications.
![Image](/assets/images/lambdatest-scim/azure-ad/enterprise-applications.png)

**Step 5:** In the applications list, select application used for <BrandName /> SSO setup
![Image](/assets/images/lambdatest-scim/azure-ad/search-lambdatest-sso.png)

**Step 6:** Select the Provisioning tab.
![Image](/assets/images/lambdatest-scim/azure-ad/provisioning-tab.png)

**Step 7:** Under the Admin Credentials section, input your <BrandName /> SCIM Base URL `https://auth.lambdatest.com/api/scim?aadOptscim062020`  and Bearer Token retrieved earlier in Step 3. Click Test Connection to ensure Azure AD can connect to <BrandName />. If the connection fails, ensure your <BrandName /> account has Admin permissions and try again.
![Image](/assets/images/lambdatest-scim/azure-ad/credentials.png)

**Step 8:** Under the Mappings section, select Synchronize Azure Active Directory Users.
![Image](/assets/images/lambdatest-scim/azure-ad/mapping-tab.png)

**Step 9:** Creating Custom Attributes

- Show advanced options > Edit attribute list for customappsso > Add attributes
- userName, Active, name.givenName, name.familyName are required attributes

![Image](/assets/images/lambdatest-scim/azure-ad/userName.png)
 
- **`urn:ietf:params:scim:schemas:extension:TestMu AI:2.0:User:OrganizationRole`**: Custom attribute used to set <BrandName /> Organization Role for Users, If this attribute is not mapped User role would be set by default. Allowed values are (Admin/Guest/User)

- **`urn:ietf:params:scim:schemas:extension:TestMu AI:2.0:User:LambdatestGroup`**: Used to assign an existing group in <BrandName /> to a new user created in <BrandName /> through SCIM. (Applicable only if organisation has group support active)

For filtering only **userName** attribute is supported and must be selected for filtering, click edit on userPrincipalName and make sure **Apply this mapping** is set to **Always**

![Image](/assets/images/lambdatest-scim/azure-ad/attribute-mapping.png)

- **Dynamic/Static assignment of custom attributes**: After custom attribute creation, we have to map them using “Add new mapping”

![Image](/assets/images/lambdatest-scim/azure-ad/dynamic_1.png)

![Image](/assets/images/lambdatest-scim/azure-ad/dynamic_2.png)

Now there are three types Mapping type in AzureAD, “Direct”, “Constant” and “Expression”.

For example we can set Constant association “Guest” for `urn:ietf:params:scim:schemas:extension:TestMu AI:2.0:User:OrganizationRole`

![Image](/assets/images/lambdatest-scim/azure-ad/dynamic_3.png)

Or, can create association using the Expression like this ,

```javascript
IIF(SingleAppRoleAssignment([appRoleAssignments])="Admin", "Admin",
IIF(SingleAppRoleAssignment([appRoleAssignments])="Guest", "Guest",
IIF(SingleAppRoleAssignment([appRoleAssignments])="User", "User", "User")))
```

In the above example we are using the appRoleAssignments attribute of microsoft user to set string value.

After custom attribute creation, we have to map them using “Add new mapping”

**Step 10:** To enable the Azure AD provisioning service for <BrandName />, change the Provisioning Status to On in the Settings section.
![Image](/assets/images/lambdatest-scim/azure-ad/provisioning-on.png)

**Step 11:** When you are ready to provision, click Save.

This operation starts the initial synchronization cycle of all users in Scope in the Settings section. The initial cycle takes longer to perform than subsequent cycles, which occur approximately every 40 minutes as long as the Azure AD provisioning service is running.

![Image](/assets/images/lambdatest-scim/azure-ad/save.png)

<Warning> That's all you need to know about <BrandName /> SCIM Auto User Provisioning with Azure AD.In case you have any questions please feel free to reach out to us via the <span className="doc__lt" onClick={() => window.openLTChatWidget()}>**24/7 chat support**</span> or email us over [support@testmu.ai](mailto:support@testmu.ai). </Warning>

