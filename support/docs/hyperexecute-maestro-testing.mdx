---
title: "Execute Maestro Framework Tests on HyperExecute"
sidebarTitle: "Maestro"
keywords: ['maestro', 'raw', 'java', 'testmu ai java', 'framework on testmu ai', 'testng', 'app testing', 'real devices']
---

import { BrandName } from '/snippets/BrandName.mdx';
import { GitHubButton } from '/snippets/GitHubButton.mdx';


This page outlines how to execute your Maestro tests on HyperExecute with [YAML 0.2](/support/docs/hyperexecute-yaml-version0.2/)

## Prerequisites
To run the Tests on HyperExecute from your Local System, you are required:

- Your <BrandName /> [Username and Access key](/support/docs/hyperexecute-how-to-get-my-username-and-access-key/)
- [HyperExecute CLI](/support/docs/hyperexecute-cli-run-tests-on-hyperexecute-grid/) in order to initiate a test execution Job .
- Setup the [Environmental Variable](/support/docs/hyperexecute-environment-variable-setup/)
- [HyperExecute YAML](/support/docs/hyperexecute-yaml-version0.2/) file which contains all the necessary instructions.

## Step 1: Setup Your Test Suite
You can use your own project to configure and test it. For demo purposes, we are using the sample repository.

<Check>
**SAMPLE REPO**

Download or Clone the code sample for the Maestro framework from the <BrandName /> GitHub repository to run the tests on the HyperExecute.
<GitHubButton url="https://github.com/LambdaTest/hyperexecute-maestro-sample-test" />
</Check>

## Step 2: Setup the CLI in your Test Suite
After cloning / downloading the sample repo, you need to setup the CLI and the environment variables.

### Download the HyperExecute CLI
The CLI is used for triggering the tests on HyperExecute. It is recommend to download the CLI binary on the host system and keep it in the root directory of the suite to perform the tests on HyperExecute.

You can download the CLI for your desired platform from the below mentioned links:

| Platform | HyperExecute CLI |
| ---------| ---------------- |
| Windows | https://downloads.lambdatest.com/hyperexecute/windows/hyperexecute.exe |
| MacOS | https://downloads.lambdatest.com/hyperexecute/darwin/hyperexecute |
| Linux | https://downloads.lambdatest.com/hyperexecute/linux/hyperexecute |

## Step 3: Upload your Application
Upload your <b>_android_</b> application (.apk file) or <b>iOS</b> application (.ipa file) to the <BrandName /> servers using our <b>REST API</b>. You need to provide your <b>Username</b> and <b>AccessKey</b> in the format `Username:AccessKey` in the <b>cURL</b> command for authentication.

<Note>
**INFO**

Enter your local path of the code repository instead of `<YOUR_LOCAL_APP_PATH>` in the below cURL command.
</Note>

```bash
curl -u "YOUR_LAMBDATEST_USERNAME:YOUR_LAMBDATEST_ACCESS_KEY" -X POST "https://manual-api.lambdatest.com/app/upload/realDevice" -F "appFile=@"<YOUR_LOCAL_APP_PATH>"" -F "name="sampleApp""
```

<Note>

Response of above cURL will be a **JSON** object containing the `App ID` of the format - `<APP123456789012345678901234567>` and will be used in the next step.
</Note>

## Step 4: Configure YAML in your Test Suite
Enter your `APP_ID` in the YAML file that you have fetched in the above step.

<Tabs>
  <Tab title="Android-Real Device">
```yaml hyperexecute.yaml
404: Not Found
```
  </Tab>
  <Tab title="iOS-Real Device">
<Note>

To enable execution on iOS real devices, install the following [JAR-file](https://prod-mobile-artefacts.lambdatest.com/assets/maestro-cli/1.41.0-beta-1/maestro.jar) and include it in your payload. This JAR acts as a wrapper to facilitate compatibility with Maestro when running on iOS real devices.
</Note>

```yaml hyperexecute.yaml
404: Not Found
```
  </Tab>
  <Tab title="Android-Emulator">
<Note>

To enable this for your organizaton, connect with us through our <span className="doc__lt" onClick={() => window.openLTChatWidget()}>**24/7 chat support**</span> or drop us an email to [support@testmu.ai](mailto:support@testmu.ai).
</Note>

```yaml hyperexecute.yaml
404: Not Found
```
  </Tab>
  <Tab title="iOS-Simulator">
<Note>

To enable this for your organizaton, connect with us through our <span className="doc__lt" onClick={() => window.openLTChatWidget()}>**24/7 chat support**</span> or drop us an email to [support@testmu.ai](mailto:support@testmu.ai).
</Note>

```yaml hyperexecute.yaml
404: Not Found
```
  </Tab>
</Tabs>

<Note>

HyperExecute now supports [tunnel capabilities](/support/docs/hyperexecute-how-to-configure-tunnel/) for Maestro tests running on both virtual devices and real devices using the Raw Framework configuration.
</Note>

## Step 5: Generate JUnit XML Report
1. Update the `runTest.sh` file to include the `--format junit` flag in the maestro test command:

```bash
/home/ltuser/.maestro/bin/maestro test $1 --debug-output ./MaestroLogs --format junit
```

The above command will generate a `report.xml` file in the root directory after each test execution. Here is the complete reference of the `runTest.sh` file:

```yaml maestro-test/runTest.sh
#!/bin/bash
# List the running processes on the machine
# ps -ef
# list the connected devices
adb devices
# check the maestro version
/home/ltuser/.maestro/bin/maestro -v
# Running the maestro test this can run several tests as passed in the test discovery
/home/ltuser/.maestro/bin/maestro test $1 --debug-output ./MaestroLogs --format junit
```
When running on iOS real devices, you need to use a dedicated script since the execution flow differs slightly from iOS simulators and Android.

```yaml maestro-test/runTest_ios_realdevice.sh
#!/bin/bash
env
java -jar ./maestro.jar  test ./$1 --debug-output ./MaestroLogs --format junit
```

2. Update your HyperExecute YAML file to enable the native reporting in HyperExecute using the generated JUnit XML files.

```yaml title="hyperexecute.yaml"
report: true
partialReports:
  - location: .
    type: xml
    frameworkName: junit
```

### ðŸ“˜ Use Cases
#### Use Case 1: One Test per Task
If you're executing one test per task, a single `report.xml` will be generated per job. These individual reports can then be merged later for a consolidated result.

#### Use Case 2: Multiple Tests on the same Task
In this case, the `report.xml` file gets overwritten after each test execution. This results in only the last test's results being preserved. To prevent overwriting, update your `testRunnerCommand` in the `hyperexecute.yaml` file to rename the report after each test:

```yaml title="hyperexecute.yaml"
testRunnerCommand: ./maestro-test/runTest.sh $test && mv report.xml $test.xml 
```

This ensures that each test result is saved with a unique name like test1.xml, test2.xml, etc.

## Step 6: Execute your Test Suite
<Note>
**NOTE:** In case of MacOS, if you get a permission denied warning while executing CLI, simply run **`chmod u+x ./hyperexecute`** to allow permission. In case you get a security popup, allow it from your **System Preferences** â†’ **Security & Privacy** â†’ **General tab**.
</Note>

```bash
./hyperexecute --user YOUR_LAMBDATEST_USERNAME --key YOUR_LAMBDATEST_ACCESS_KEY --config RELATIVE_PATH_OF_YOUR_YAML_FILE
```

<img loading="lazy" src="/assets/images/hyperexecute/frameworks/maestro/1.png" alt="JUnit HyperExecute Terminal Logs" width="1920" height="868" className="doc_img"/>

## Step 7: Monitor the Test Execution
Visit the [HyperExecute Dashboard](https://hyperexecute.lambdatest.com/hyperexecute) and check your Job status. 

<img loading="lazy" src="/assets/images/hyperexecute/frameworks/maestro/2.png" alt="automation-dashboard" width="1920" height="868" className="doc_img"/>


## Additional Information: Launching Pre-Installed Apps with Maestro
In some cases, you may want to test against a pre-installed application on the device (instead of uploading and installing a new APK/IPA). Maestro supports this by allowing you to specify the appâ€™s package identifier (Android) or bundle identifier (iOS) in your test configuration.

### Step 1: Identify the App ID (Package Name / Bundle ID)
#### For Android:
  - Visit the appâ€™s page on the Google Play Store.
  - The id parameter in the URL is the package name.
  - Example: For the Wikipedia app â†’ `org.wikipedia`.

#### For iOS:
  - Identify the bundle identifier (e.g., com.apple.Preferences for Settings).

### Step 2: Update Your HyperExecute Configuration
You can configure your YAML files to launch the pre-installed app instead of uploading a new one.

```yaml hyperexecute.yaml highlight={5}
...//
framework:
  name: raw
  args:
    appId: stock
```

and the launcher yaml file to tells maestro to use the pre-installed Wikipedia app.

```yaml  title="android-launch.yaml"
404: Not Found
```

### Step 3: Execute your Test Suite
<Note>
**NOTE:** In case of MacOS, if you get a permission denied warning while executing CLI, simply run **`chmod u+x ./hyperexecute`** to allow permission. In case you get a security popup, allow it from your **System Preferences** â†’ **Security & Privacy** â†’ **General tab**.
</Note>

```bash
./hyperexecute --user YOUR_LAMBDATEST_USERNAME --key YOUR_LAMBDATEST_ACCESS_KEY --config RELATIVE_PATH_OF_YOUR_YAML_FILE
```

The Wikipedia app will open directly on the device, and your Maestro test steps will execute against it.

**Example: Wikipedia Search Flow**

```yaml title="android-launch.yaml"
appId: org.wikipedia
----
launchApp

tapOn: "Search Wikipedia"
inputText: "Maestro framework"
pressKey: Enter
assertVisible: "Mobile UI testing"
```

<img loading="lazy" src="/assets/images/hyperexecute/frameworks/maestro/3.png" alt="Image" className="doc_img"/>

**Explanation:**

- **launchApp:**  Opens the Wikipedia app.
- **tapOn:** "Search Wikipedia" â†’ Focuses the search bar.
- **inputText:** "Maestro framework" â†’ Enters the text.
- **pressKey:** Enter â†’ Submits the search.
- **assertVisible:** "Mobile UI testing" â†’ Validates results.

### Best Practices
- Make sure the app is already installed on the device; otherwise, Maestro cannot launch it.
- The same approach works for iOS using the bundle identifier.
- You can also switch between multiple apps in a single flow by providing different appId values in separate steps.
